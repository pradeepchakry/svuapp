(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{208:function(e,t,n){},209:function(e,t,n){},511:function(e,t,n){"use strict";n.r(t);var a=n(6),o=n(0),r=n.n(o),c=n(9),i=n.n(c),s=(n(208),n(93)),l=n(94),u=n(100),h=n(99),d=(n.p,n(209),n(210),n(12)),m=n(21),p=Object(m.a)(),b=n(33),j=n.n(b),f=n(54),g=n(41),O=n(548),x=(n(555),n(559),n(558),n(553),n(556),n(557),n(554),n(565)),v=(n(90),n(40)),y=n(551);n(552),Object(O.a)((function(e){return{table:{minWidth:600},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},paper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"10px",height:"100%",width:"99%",marginTop:e.spacing(7)},link:{color:"rgba(0,0,0,0.65)",textDecoration:"none",marginLeft:"10%",alignSelf:"flex-start","&:hover":{color:"rgba(0,0,0,1)"}}}}));var S=n(564),C=n(561),k=n(562),w=n(560),N=n(563);function T(){return Object(a.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(v.a,{color:"inherit",href:"https://material-ui.com/",children:"SVUDDE"})," ",(new Date).getFullYear(),"."]})}var E=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function P(){Object(d.e)();var e=E(),t=r.a.useState(!0),n=Object(g.a)(t,2),o=n[0],c=n[1],i=r.a.useState(!0),s=Object(g.a)(i,2),l=s[0],u=s[1],h=r.a.useState(!0),m=Object(g.a)(h,2),p=m[0],b=m[1],O=r.a.useState(!0),x=Object(g.a)(O,2),v=(x[0],x[1],r.a.useState("Nothing saved in the session")),P=Object(g.a)(v,2);P[0],P[1];function F(){return(F=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/svudde/saveForm",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));console.log("Status: OK in Home");var t=document.createElement(e);console.log("Response "+JSON.stringify(e)),document.body.appendChild(t)})).catch((function(e){console.log("There has been a problem with the fetch operation: "+e.message)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o&&c(!1),Object(a.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(C.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(y.a,{component:"h1",variant:"h5",children:"Fill the Online Application Form"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(a.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",onChange:function(e){return u(e.target.value)},autoFocus:!0}),Object(a.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"gender",label:"Gender",name:"gender",autoComplete:"gender",onChange:function(e){return b(e.target.value)},autoFocus:!0}),Object(a.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){!function(e){F.apply(this,arguments)}({name:l,gender:p,enrolmentNo:"bacasdfas"}),u(""),b("")},children:"Save"})]})]}),Object(a.jsx)(N.a,{mt:8,children:Object(a.jsx)(T,{})})]})}var F=n(184),I=n(124),D=n.n(I),V=(n(510),n(7)),W=n(185),J=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),H=function(){return Object(a.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(v.a,{color:"inherit",href:"https://material-ui.com/",children:"SVUDDE"})," ",(new Date).getFullYear(),"."]})},L=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={phone:"",seen:!1,otpEntered:"",otpSentSessionId:"",studentId:0,studentExists:!1},a.handlePhone=function(e){a.setState({phone:e})},a.modifyPhone=function(){console.log("modifying Phone "+a.state.phone);var e=a.state.phone.split("+91");console.log("phone trimemd to "+e[1]);var t=e[1];a.setState({phone:t})},a.handleOTPSubmit=function(){a.state.otpEntered;console.log("verifying if the mobile number is already registered! "+a.state.phone),a.checkExistingStudent(a.state.phone)},a.getPhone=function(){return a.state.phone},a}return Object(l.a)(n,[{key:"handleSendOTP",value:function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.modifyPhone();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkExistingStudent",value:function(e){var t=this;console.log("In checkExistingStudent...");fetch("http://159.203.148.240:8080/api/v1/Student/"+e).then((function(n){n.ok?(console.log("Found an existing record with the number "+e+" enrolled, fethcing record!"),fetch("http://159.203.148.240:8080/api/v1/Student/"+t.state.phone).then((function(e){return e.json()})).then((function(e){console.log("Existing student details --\x3e "+JSON.stringify(e)),t.setState({studentId:e.student_id})}))):(console.log("No Student found with the number "+e+" redirecting to new application!"),p.push("/home"))})).catch(console.log)}},{key:"verifyOTP",value:function(){var e=Object(f.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=!1,a="https://2factor.in/API/V1/f3e5e9af-4bfb-11eb-8153-0200cd936042/SMS/VERIFY/"+this.state.otpSentSessionId+"/"+t,e.next=5,fetch(a).then((function(e){if(console.log("otp verification >> "+e.staus),!e.ok)throw new Error("HTTP error! status: ".concat(e.status));console.log("Status: OK"),n=!0})).catch(console.log);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(a.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(C.a,{}),Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(x.a,{className:t.avatar,children:Object(a.jsx)(D.a,{})}),Object(a.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsx)(W.a,{defaultCountry:"IN",value:this.state.phone,placeholder:"Enter phone number",onChange:this.handlePhone}),Object(a.jsx)("div",{className:"btn",children:Object(a.jsx)(F.a,{trigger:Object(a.jsx)("button",{className:"button",onFocus:function(){e.handleSendOTP()},children:" Sign In "}),modal:!0,nested:!0,children:function(t){return Object(a.jsxs)("div",{className:"modal",children:[Object(a.jsx)("button",{className:"close",onClick:t,children:"\xd7"}),Object(a.jsx)("div",{className:"header",children:" Enter the OTP sent to your Mobile Number "}),Object(a.jsxs)("div",{className:"content",children:[" ",Object(a.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,id:"otpEntered",label:"One Time Password",name:"otpEntered",autoComplete:"",defaultValue:e.state.otpEntered,onChange:function(t){var n=t.target.value;e.setState({otpEntered:n})},autoFocus:!0})]}),Object(a.jsxs)("div",{className:"actions",children:[Object(a.jsx)("button",{className:"button",onClick:function(){console.log("clicked submit"),e.handleOTPSubmit()},children:"Submit"}),Object(a.jsx)("button",{className:"button",onClick:function(){console.log("modal closed "),t()},children:"Change Mobile Number"})]})]})}})})]}),Object(a.jsx)(N.a,{mt:8,children:Object(a.jsx)(H,{})})]})}}]),n}(r.a.Component),M=Object(V.a)(J,{withTheme:!0})(L),q=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(d.b,{history:p,children:[Object(a.jsx)(d.a,{name:"Login",path:"/",exact:!0,component:M}),Object(a.jsx)(d.a,{name:"Home",path:"/home",exact:!0,component:P})]})}}]),n}(r.a.Component),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,568)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(q,{})}),document.getElementById("root")),Y()}},[[511,1,2]]]);
//# sourceMappingURL=main.d457eaea.chunk.js.map